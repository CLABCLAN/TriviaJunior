<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topografie Mini Game</title>
  
  <style>
    body {
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 0;
  padding: 20px;
  background: linear-gradient(135deg, #f6d365, #fda085, #a1c4fd, #c2e9fb);
  background-size: 600% 600%;
  animation: gradientBG 20s ease infinite;
  position: relative;
}

@keyframes gradientBG {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

h1, .instructions, .score-box, .question-box, #message, #restart-btn, .continent-info {
  position: relative;
  z-index: 1;
}

.instructions {
  margin-bottom: 15px;
  text-align: center;
  background: rgba(255,255,255,0.3);
  padding: 10px 20px;
  border-radius: 8px;
}

.continent-info {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 10px;
  padding: 8px 16px;
  background: rgba(100,200,255,0.4);
  border-radius: 8px;
  color: #003366;
}

.score-box {
  font-size: 18px;
  margin-bottom: 10px;
}

.question-box {
  font-size: 28px;
  font-weight: bold;
  margin-bottom: 20px;
  padding: 10px 20px;
  background: rgba(255,255,255,0.5);
  border-radius: 10px;
  text-align: center;
  width: 90%;
  max-width: 700px;
}

.map-container {
  position: relative;
  /* De container krimpt nu om de afbeelding te passen */
  display: inline-block; 
  overflow: hidden;
  border: 2px solid #333;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

#map {
  /* Maximale grootte voor de kaart, behoudt aspect ratio */
  max-width: 900px;
  max-height: 600px;
  display: block; /* Voorkomt extra ruimte onder de afbeelding */
  user-select: none;
}

.pin {
  width: 20px;
  height: 20px;
  background-color: red;
  border-radius: 50%;
  position: absolute;
  transform: translate(-50%, -50%);
  border: 2px solid white;
  z-index: 2;
}

.correct-pin {
  background-color: green;
  animation: pulse 0.5s ease-in-out 2;
}

@keyframes pulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.3); }
}

#message {
  margin-top: 15px;
  font-size: 18px;
  font-weight: bold;
}

#restart-btn {
  margin-top: 15px;
  padding: 10px 20px;
  font-size: 16px;
  background-color: #4caf50;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 1;
}

#restart-btn:hover {
  background-color: #45a049;
}

.confetti {
  position: fixed;
  width: 8px;
  height: 8px;
  background-color: red;
  top: 0;
  animation: fall 2s linear forwards;
  pointer-events: none;
  border-radius: 50%;
  z-index: 3;
}

@keyframes fall {
  to {
    transform: translateY(100vh) rotate(360deg);
  }
}
  </style>
</head>
<body>

<h1>Topografie Mini Game</h1>

<div class="instructions">
  Beantwoord de vragen door op de kaart te klikken en een pin op de juiste plek te zetten!
</div>

<div class="continent-info" id="continent-info"></div>

<div class="score-box">
  Score: <span id="score">0</span> / <span id="total">0</span>
</div>

<div class="question-box" id="question-box"></div>

<div class="map-container">
  <img id="map" src="images/map.png" alt="Kaart">
</div>

<div id="message"></div>
<button id="restart-btn">Opnieuw beginnen</button>
<div style="margin-top: 10px; background: rgba(0,0,0,0.1); padding: 10px; border-radius: 5px;">
  <label for="coords-mode">Toon coÃ¶rdinaten bij klik:</label>
  <input type="checkbox" id="coords-mode">
  <span id="coords-display" style="margin-left: 15px; font-weight: bold;"></span>
</div>

<script>
const questionsByContinent = {
  "Europa": [
    { question: "Klik op Europa: Plaats de rode pin op het continent Europa", correctArea: { type: 'rect', x: 340, y: 50, width: 135, height: 115 } },
    { question: "Klik op de Middellandse Zee: Plaats de rode pin op de Middellandse Zee", correctArea: { type: 'rect', x: 380, y: 120, width: 110, height: 25 } }
  ],
  "Afrika": [
    { question: "Klik op Afrika: Plaats de rode pin op het continent Afrika", correctArea: { type: 'rect', x: 370, y:120, width: 160, height: 180 } },
    { question: "Klik op de Sahara: Plaats de rode pin op de Sahara-woestijn", correctArea: { type: 'circle', x: 450, y: 200, radius: 45 } }
  ],
  "AziÃ«": [
    { question: "Klik op AziÃ«: Plaats de rode pin op het continent AziÃ«", correctArea: { type: 'rect', x: 450, y: 45, width: 280, height: 240 } },
    { question: "Klik op de Himalaya: Plaats de rode pin op de bergketen Himalaya", correctArea: { type: 'circle', x: 570, y: 150, radius: 25 } },
    { question: "Klik op Mount Everest: Plaats de rode pin op de top van Mount Everest", correctArea: { type: 'circle', x: 645, y: 255, radius: 10 } },
    { question: "Klik op Japan: Plaats de rode pin op Japan", correctArea: { type: 'circle', x: 800, y: 200, radius: 25 } }
  ],
  "Noord-Amerika": [
    { question: "Klik op Noord-Amerika: Plaats de rode pin op het continent Noord-Amerika", correctArea: { type: 'rect', x: 80, y: 80, width: 280, height: 240 } },
    { question: "Klik op Groenland: Plaats de rode pin op Groenland", correctArea: { type: 'circle', x: 310, y: 70, radius: 55 } }
  ],
  "Zuid-Amerika": [
    { question: "Klik op Zuid-Amerika: Plaats de rode pin op het continent Zuid-Amerika", correctArea: { type: 'rect', x: 230, y: 310, width: 120, height: 200 } },
    { question: "Klik op de Amazone: Plaats de rode pin op de rivier Amazone", correctArea: { type: 'circle', x: 270, y: 355, radius: 40 } }
  ],
  "AustraliÃ«": [
    { question: "Klik op AustraliÃ«: Plaats de rode pin op het continent AustraliÃ«", correctArea: { type: 'rect', x: 730, y: 380, width: 110, height: 85 } }
  ],
  "Antarctica": [
    { question: "Klik op Antarctica: Plaats de rode pin op het continent Antarctica", correctArea: { type: 'rect', x: 200, y: 520, width: 500, height: 40 } },
    { question: "Klik op de Zuidpool: Plaats de rode pin op de Zuidpool", correctArea: { type: 'circle', x: 450, y: 540, radius: 25 } }
  ],
  "Oceanen": [
    { question: "Klik op de oceaan links van Afrika: Plaats de rode pin op de Atlantische Oceaan", correctArea: { type: 'circle', x: 340, y: 320, radius: 50 } },
    { question: "Klik op de oceaan rechts van Afrika: Plaats de rode pin op de Indische Oceaan", correctArea: { type: 'circle', x: 610, y: 390, radius: 60 } }
  ],
  "Poolgebieden": [
    { question: "Klik op de Noordpool: Plaats de rode pin op de Noordpool", correctArea: { type: 'circle', x: 450, y: 20, radius: 35 } }
  ]
};

let allQuestions = [];
let currentQ = 0;
let score = 0;
let canClick = true;

const questionBox = document.getElementById('question-box');
const continentInfo = document.getElementById('continent-info');
const map = document.getElementById('map');
const mapContainer = document.querySelector('.map-container');
const message = document.getElementById('message');
const restartBtn = document.getElementById('restart-btn');
const scoreDisplay = document.getElementById('score');
const totalDisplay = document.getElementById('total');
const coordsModeCheckbox = document.getElementById('coords-mode');
const coordsDisplay = document.getElementById('coords-display');

function initGame() {
  allQuestions = [];
  for (const continent in questionsByContinent) {
    questionsByContinent[continent].forEach(q => {
      allQuestions.push({ ...q, continent: continent });
    });
  }
  totalDisplay.textContent = allQuestions.length;
}

function showQuestion() {
  if(currentQ >= allQuestions.length){
    questionBox.textContent = `Alle vragen zijn beantwoord! ðŸŽ‰ Score: ${score} / ${allQuestions.length}`;
    continentInfo.textContent = "";
    return;
  }
  const current = allQuestions[currentQ];
  continentInfo.textContent = `Continent/Gebied: ${current.continent}`;
  questionBox.textContent = current.question;
  message.textContent = "";
}

function showConfetti() {
  for(let i=0;i<100;i++){
    const confetti = document.createElement('div');
    confetti.classList.add('confetti');
    confetti.style.left = Math.random()*window.innerWidth + 'px';
    confetti.style.backgroundColor = `hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(confetti);
    setTimeout(()=> confetti.remove(), 2000);
  }
}

mapContainer.addEventListener('click', e => {
  const rectForCoords = map.getBoundingClientRect();
  const xForCoords = e.clientX - rectForCoords.left;
  const yForCoords = e.clientY - rectForCoords.top;

  if (coordsModeCheckbox.checked) {
    const coordsText = `x: ${Math.round(xForCoords)}, y: ${Math.round(yForCoords)}`;
    coordsDisplay.textContent = coordsText;
  }
  if(currentQ >= allQuestions.length || !canClick) return;

  canClick = false;

  const rect = map.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  const userPin = document.createElement('div');
  userPin.classList.add('pin');
  userPin.style.left = x + 'px';
  userPin.style.top = y + 'px';
  mapContainer.appendChild(userPin);

  const area = allQuestions[currentQ].correctArea;
  let isCorrect = false;
  let correctPinX, correctPinY;

  if (area.type === 'circle') {
    const dx = x - area.x;
    const dy = y - area.y;
    isCorrect = Math.sqrt(dx*dx + dy*dy) <= area.radius;
    correctPinX = area.x;
    correctPinY = area.y;
  } else if (area.type === 'rect') {
    isCorrect = (x >= area.x && x <= area.x + area.width &&
                 y >= area.y && y <= area.y + area.height);
    correctPinX = area.x + area.width / 2;
    correctPinY = area.y + area.height / 2;
  }

  setTimeout(() => {
    const correctPin = document.createElement('div');
    correctPin.classList.add('pin', 'correct-pin');
    correctPin.style.left = correctPinX + 'px';
    correctPin.style.top = correctPinY + 'px';
    mapContainer.appendChild(correctPin);

    if(isCorrect){
      message.textContent = "Correct! ðŸŽ‰ +1 punt";
      score++;
      scoreDisplay.textContent = score;
      showConfetti();
    } else {
      message.textContent = "Fout! Het correcte antwoord wordt in het groen getoond.";
    }

    setTimeout(() => {
      userPin.remove();
      correctPin.remove();
      currentQ++;
      canClick = true;
      showQuestion();
    }, 2000);
  }, 500);
});

restartBtn.addEventListener('click', () => {
  document.querySelectorAll('.pin').forEach(pin=>pin.remove());
  currentQ = 0;
  score = 0;
  scoreDisplay.textContent = score;
  canClick = true;
  showQuestion();
  message.textContent = "";
});

initGame();
showQuestion();
</script>
</body>
</html>
